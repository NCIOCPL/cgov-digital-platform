{% import '@ncids_trans/listing/ncids_list_item_macros.twig' as listItemMacros %}

{% if content.field_media_link[0] %}

  {#
   # Since we never output content.field_media_link directly,
   # we need to bubble the cache tag
  #}
  {{ bubble_cache(content.field_media_link[0]["#media"]) }}

  {# ###### Setup Title ####### #}
  {% if content.field_override_title[0] %}
    {% set title = content.field_override_title[0]["#context"].value %}
  {% else %}
    {% set title = content.field_media_link[0]["#media"].name.value %}
  {% endif %}

  {% set media_type = content.media_link_type['#plain_text'] %}

  {# ###### Setup Description ####### #}
  {% if content.field_override_list_description|field_value %}
    {% set description = content.field_override_list_description|field_value %}
  {% elseif content.field_media_link[0]["#media"].field_list_description[0] %}
    {% set description = content.field_media_link[0]["#media"].field_list_description[0].value %}
  {% elseif content.field_media_link[0]["#media"].field_page_description[0] %}
    {% set description = content.field_media_link[0]["#media"].field_page_description[0].value %}
  {% else %}
  {# Else no description #}
  {% endif %}

  {# ###### Setup Img ######## #}
  {% if content.field_override_image_promotional[0] %}
    {% set image = content.field_override_image_promotional[0] %}
  {% elseif content.field_media_link[0] %}
    {% set image = content.field_media_link %}
  {% endif %}
  {# ###### Setup URL ######## #}
  {% set url = path('entity.media.canonical', {'media':  content.field_media_link[0]["#media"].mid[0].value}) %}

  {% set media_type = content.media_link_type['#plain_text'] %}
  {% if media_type == 'File' %}
    {% set file_type = content.media_link_file_type['#plain_text']%}
    {% set file_size = content.media_link_file_size['#plain_text'] %}
    {% set file_ext = content.media_link_file_extension['#plain_text'] %}
    {{ listItemMacros.ncids_list_macro(title, description, url, "Title, Description, and Image", image, media_type, file_type, file_size, file_ext) }}
  {% else %}
    {{ listItemMacros.ncids_list_macro(title, description, url, "Title, Description, and Image", image, media_type) }}
  {% endif %}
{% endif %}
