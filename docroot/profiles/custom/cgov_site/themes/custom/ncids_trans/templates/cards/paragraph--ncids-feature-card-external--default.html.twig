{% import '@ncids_trans/cards/ncids_card_macros.twig' as cardMacros %}

{# This needs to parallel the feature card template. However, we
 # get the title, description, image and URL from the paragraph fields.
 #}

{# ###### Setup Title ####### #}
{% set title = content.field_override_card_title[0] %}

{# ###### Setup Description ####### #}
{% set description = content.field_override_card_description[0] %}

{# ###### Setup URL ######## #}
{% set url = content.field_featured_url[0]['#url'] %}

{# ###### Setup Img ######## #}
{% set image = content.field_override_image_promotional %}

{# ###### Render Card ###### #}
{% set id = paragraph.id() %}
{% set entity_type = paragraph.entityTypeID %}
{% set card_attributes = create_attribute({'class': ['nci-card','cgdp-feature-card']}) %}
  {% if (paragraph.field_external_link_display.value == 'force_display') %}
    {% set card_attributes = card_attributes.addClass('nci-card--external') %}
  {% endif %}
<div class="usa-section">
  <div {{ card_attributes }}>
    {{ cardMacros.ncidsFeatureCard(title, description, image, url, directory, id, entity_type, 'External', suppress_external_icon) }}
  </div>
</div>
