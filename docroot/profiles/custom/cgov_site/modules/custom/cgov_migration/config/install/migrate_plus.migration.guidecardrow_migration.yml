id: guidecardrow_migration
label: 'Custom guidecardrow migration'

source:
  plugin: url
  data_fetcher_plugin: file
  data_parser_plugin: xml
  urls: /var/www/docroot/profiles/custom/cgov_site/modules/custom/cgov_migration/migrations/private-files-mig/guidecard.xml
  item_selector: /rows/row
  fields:
        -
         name: row_rid
         label: row_rid
         selector: row_rid
        -
         name: langcode
         label: langcode
         selector: langcode

        -
         name: field_content_heading
         label: field_content_heading
         selector: field_content_heading

        -
         name: field_guide_cards
         label: field_guide_cards
         selector: field_guide_cards



  ids:
    row_rid:
      type: integer


process:
 id: row_rid
 langcode: langcode
 field_content_heading: field_content_heading

 temp_text:
    plugin: migration_lookup
    migration: rawhtml_migration

    no_stub: true
    source: field_guide_cards

 field_row_cards:
    plugin: iterator
    source: '@temp_text'

    process:
      target_id: '0'
      target_revision_id: '1'

destination:
 plugin: 'entity_reference_revisions:paragraph'
 default_bundle: cgov_guide_row
migration_dependencies: {  }
